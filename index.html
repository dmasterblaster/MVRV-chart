<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>MVRV Z-Score Chart</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body style="margin:0;padding:0;">

  <div id="chart" style="width:100vw;height:100vh;"></div>

  <script>
    const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQSIuDbdKQG358WGpP-wJnNGaxfcWzvro7rmv32_rC1wUX7dYSnJaHUYZrwi5eVr00nXuEA9J7z98YF/pub?output=csv";

    fetch(sheetURL)
      .then(response => response.text())
      .then(csv => {
        const rows = csv.trim().split("\n");
        rows.shift(); // Remove header

        const dates = [];
        const values = [];

        rows.forEach(row => {
          const [date, value] = row.split(",");
          dates.push(date);
          values.push(parseFloat(value));
        });

        const trace = {
          x: dates,
          y: values,
          type: 'scatter',
          mode: 'lines',  // LINE ONLY
          line: { shape: 'spline', width: 2 }
        };

        Plotly.newPlot('chart', [trace], {
          margin: { t: 30, l: 60, r: 30, b: 50 },
          xaxis: { title: 'Date' },
          yaxis: { title: 'MVRV Z score' },
          showlegend: false
        }, {responsive: true});
      });
  </script>
</body>
</html>
